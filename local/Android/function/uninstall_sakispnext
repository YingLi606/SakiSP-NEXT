#!/data/data/com.termux/files/usr/bin/bash

uninstall_sakispnext() {
RED="\033[31m"
GREEN="\033[32m"
YELLOW="\033[33m"
RESET="\033[0m"

if ! command -v whiptail &> /dev/null; then
    echo -e "${YELLOW}[提示] 未检测到whiptail，正在自动安装...${RESET}"
    pkg install whiptail -y &> /dev/null
fi

if whiptail --title "SakiSP-NEXT 卸载工具" --yesno "是否确认卸载 SakiSP-NEXT 及相关文件及容器？" 8 50; then
    echo -e "\n${GREEN}[+] 开始执行卸载操作...${RESET}"

    PATH1="${HOME}/.termux/共享文件夹"
    PATH2="${HOME}/.termux/SakiSP-NEXT"
    PATH3="${HOME}/SakiSP-NEXT"

    if [ -e "$PATH1" ]; then
        echo -e "${YELLOW}[*] 检测到 $PATH1，正在删除...${RESET}"
        rm -rf "$PATH1"
        echo -e "${GREEN}[√] $PATH1 删除完成${RESET}"
    else
        echo -e "${YELLOW}[*] 未检测到 $PATH1，跳过删除${RESET}"
    fi

    if [ -e "$PATH2" ]; then
        echo -e "${YELLOW}[*] 检测到 $PATH2，正在删除...${RESET}"
        rm -rf "$PATH2"
        echo -e "${GREEN}[√] $PATH2 删除完成${RESET}"
    else
        echo -e "${YELLOW}[*] 未检测到 $PATH2，跳过删除${RESET}"
    fi

    if [ -e "$PATH3" ]; then
        echo -e "${YELLOW}[*] 检测到 $PATH3，正在删除...${RESET}"
        rm -rf "$PATH3"
        echo -e "${GREEN}[√] $PATH3 删除完成${RESET}"
    else
        echo -e "${YELLOW}[*] 未检测到 $PATH3，跳过删除${RESET}"
    fi

    echo -e "\n${GREEN}[√] 卸载操作全部完成！感谢你使用SakiSP-NEXT！${RESET}"
else
    echo -e "\n${RED}[-] 用户取消卸载操作，程序即将退出...${RESET}"
    sleep 3
    clear
    exit 0
fi
}

