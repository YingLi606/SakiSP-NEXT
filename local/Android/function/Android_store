android_store() {
    CHOICE=$(whiptail --clear --backtitle "DaLongZhuaZi" \
        --title "ğŸ¸ Androidè½¯ä»¶å•†åº—ï¼ˆarm64ï¼‰" \
        --menu "è¯·é€‰æ‹©:" 15 60 4 \
        1 "ğŸ’» ZeroTermux-0.118.3.49" \
        2 "ğŸ§ QQ" \
        3 "ğŸƒ å¾®ä¿¡" \
        4 "ğŸŒš é€€å‡º" \
    3>&1 1>&2 2>&3)
    
    case $CHOICE in
        1)
            log "ZeroTermux-0.118.3.49"
            clear
            echo "æ‚¨é€‰æ‹©äº†ï¼šZeroTermux-0.118.3.49"
            sleep 3  
            zerotermux_install
        ;;
        2)
            log "QQ"
            clear
            echo "æ‚¨é€‰æ‹©äº†ï¼šQQ"
            sleep 3
            clear
            qq_install
        ;;
        3)
            log "å¾®ä¿¡"
            clear
            echo "æ‚¨é€‰æ‹©äº†ï¼šå¾®ä¿¡"
            sleep 3
            clear
            wechat_install
        ;;
        4)
            log "é€€å‡º"
            clear
            echo "é€€å‡º"
            sleep 3
            clear
            exit 1
        ;;
        *)
            echo "é”™è¯¯æç¤ºï¼šé€‰æ‹©äº†æœªçŸ¥é€‰é¡¹ï¼Œè¯·é‡æ–°è¿›å…¥èœå•æ“ä½œ"
            sleep 3
            clear
            exit 1
        ;;
    esac
}

zerotermux_install() {
    if ! command -v aria2c &> /dev/null; then
        echo -e "\033[34mæ£€æµ‹åˆ°æœªå®‰è£…aria2cï¼Œæ­£åœ¨è‡ªåŠ¨å®‰è£…...\033[0m"
        pkg install -y aria2 > /dev/null 2>&1
    fi

    local APP_DIR="$HOME/SakiSP-NEXT/app"
    if [ ! -d "$APP_DIR" ]; then
        mkdir -p "$APP_DIR"
        echo -e "\033[34mæ£€æµ‹åˆ°appæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå·²è‡ªåŠ¨åˆ›å»ºï¼š$APP_DIR\033[0m"
    fi
   
    local DOWNLOAD_URL="https://gh.xmly.dev/https://github.com/hanxinhao000/ZeroTermux/releases/download/ZeroTermux-0.118.3.49/ZeroTermux-0.118.3.49-arm64-v8a-debug.apk"
    local SAVE_PATH="SakiSP-NEXT/app/ZeroTermux-0.118.3.49-arm64-v8a-debug.apk"

    echo -e "\033[36m=== å¼€å§‹å¤šçº¿ç¨‹ä¸‹è½½ ZeroTermux å®‰è£…åŒ… ===\033[0m"
    echo -e "\033[36mä¿å­˜è·¯å¾„ï¼š$SAVE_PATH\033[0m"
    aria2c --max-connection-per-server=8 "$DOWNLOAD_URL" -o "$SAVE_PATH"

    if [ $? -eq 0 ]; then
        echo -e "\033[32mâœ… ä¸‹è½½æˆåŠŸï¼æ­£åœ¨å”¤èµ·ç³»ç»Ÿå®‰è£…ç¨‹åº...ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯æ‰“å¼€MTç®¡ç†å™¨ä»ä¸‹è½½è·¯å¾„æ‰¾åˆ°å³å¯ï¼‰\033[0m"
        echo -e "\033[32mğŸ“Œè¯·åœ¨å¼¹å‡ºçª—å£å®Œæˆå®‰è£…ï¼Œå®‰è£…åå³å¯å¯åŠ¨å¾®ä¿¡ï¼Œå®‰è£…æˆåŠŸåè¯·åŠæ—¶ä»è„šæœ¬ä¸»é¡µé‡Œâ€œåƒåœ¾æ¸…ç†â€è¿›è¡Œåˆ é™¤\033[0m"
        sleep 3
        am start -a android.intent.action.VIEW -t application/vnd.android.package-archive -d "file://$SAVE_PATH" > /dev/null 2>&1
    else
        echo -e "\033[31mâŒ ä¸‹è½½å¤±è´¥ï¼5ç§’åé€€å‡º...\033[0m"
        sleep 5
        clear
        exit 1
    fi
}

qq_install() {
    if ! command -v aria2c &> /dev/null; then
        echo -e "\033[34mæ£€æµ‹åˆ°æœªå®‰è£…aria2cï¼Œæ­£åœ¨è‡ªåŠ¨å®‰è£…...\033[0m"
        pkg install -y aria2 > /dev/null 2>&1
    fi

    local APP_DIR="$HOME/SakiSP-NEXT/app"
    if [ ! -d "$APP_DIR" ]; then
        mkdir -p "$APP_DIR"
        echo -e "\033[34mæ£€æµ‹åˆ°appæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå·²è‡ªåŠ¨åˆ›å»ºï¼š$APP_DIR\033[0m"
    fi
    
    local DOWNLOAD_URL="https://downv6.ydcdn.tcdnos.com/qqweb/QQ_1/android_apk/Android_9.2.20_64.apk"
    local SAVE_PATH="SakiSP-NEXT/app/Android_9.2.20_64.apk"

    echo -e "\033[36m=== å¼€å§‹å¤šçº¿ç¨‹ä¸‹è½½ QQ å®‰è£…åŒ… ===\033[0m"
    echo -e "\033[36mä¿å­˜è·¯å¾„ï¼š$SAVE_PATH\033[0m"
    aria2c --max-connection-per-server=8 "$DOWNLOAD_URL" -o "$SAVE_PATH"

    if [ $? -eq 0 ]; then
        echo -e "\033[32mâœ… ä¸‹è½½æˆåŠŸï¼æ­£åœ¨å”¤èµ·ç³»ç»Ÿå®‰è£…ç¨‹åº...ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯æ‰“å¼€MTç®¡ç†å™¨ä»ä¸‹è½½è·¯å¾„æ‰¾åˆ°å³å¯ï¼‰\033[0m"
        echo -e "\033[32mğŸ“Œ è¯·åœ¨å¼¹å‡ºçª—å£å®Œæˆå®‰è£…ï¼Œå®‰è£…åå³å¯å¯åŠ¨å¾®ä¿¡ï¼Œå®‰è£…æˆåŠŸåè¯·åŠæ—¶ä»è„šæœ¬ä¸»é¡µé‡Œâ€œåƒåœ¾æ¸…ç†â€è¿›è¡Œåˆ é™¤\\033[0m"
        sleep 3
        am start -a android.intent.action.VIEW -t application/vnd.android.package-archive -d "file://$SAVE_PATH" > /dev/null 2>&1
    else
        echo -e "\033[31mâŒ ä¸‹è½½å¤±è´¥ï¼5ç§’åé€€å‡º...\033[0m"
        sleep 5
        clear
        exit 1
    fi
}

wechat_install() {
    if ! command -v aria2c &> /dev/null; then
        echo -e "\033[34mæ£€æµ‹åˆ°æœªå®‰è£…aria2cï¼Œæ­£åœ¨è‡ªåŠ¨å®‰è£…...\033[0m"
        pkg install -y aria2 > /dev/null 2>&1
    fi

    local APP_DIR="$HOME/SakiSP-NEXT/app"
    if [ ! -d "$APP_DIR" ]; then
        mkdir -p "$APP_DIR"
        echo -e "\033[34mæ£€æµ‹åˆ°appæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå·²è‡ªåŠ¨åˆ›å»ºï¼š$APP_DIR\033[0m"
    fi
    
    local DOWNLOAD_URL="https://d2ea0e6d34cd85f42e3e4f2e604513263f41296341d1faae.dlied1.cdntips.net/dldir1v6.qq.com/weixin/android/weixin8064android2940_0x28004033_arm64_1.apk"
    local SAVE_PATH="SakiSP-NEXT/app/weixin8064android2940_0x28004033_arm64_1.apk"

    echo -e "\033[36m=== å¼€å§‹å¤šçº¿ç¨‹ä¸‹è½½ å¾®ä¿¡ å®‰è£…åŒ… ===\033[0m"
    echo -e "\033[36mä¿å­˜è·¯å¾„ï¼š$SAVE_PATH\033[0m"
    aria2c --max-connection-per-server=8 "$DOWNLOAD_URL" -o "$SAVE_PATH"

    if [ $? -eq 0 ]; then
        echo -e "\033[32mâœ… ä¸‹è½½æˆåŠŸï¼æ­£åœ¨å”¤èµ·ç³»ç»Ÿå®‰è£…ç¨‹åº...ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œå¯æ‰“å¼€MTç®¡ç†å™¨ä»ä¸‹è½½è·¯å¾„æ‰¾åˆ°å³å¯ï¼‰\033[0m"
        echo -e "\033[32mğŸ“Œ è¯·åœ¨å¼¹å‡ºçª—å£å®Œæˆå®‰è£…ï¼Œå®‰è£…åå³å¯å¯åŠ¨å¾®ä¿¡ï¼Œå®‰è£…æˆåŠŸåè¯·åŠæ—¶ä»è„šæœ¬ä¸»é¡µé‡Œâ€œåƒåœ¾æ¸…ç†â€è¿›è¡Œåˆ é™¤\\033[0m"
        sleep 3
        am start -a android.intent.action.VIEW -t application/vnd.android.package-archive -d "file://$SAVE_PATH" > /dev/null 2>&1
    else
        echo -e "\033[31mâŒ ä¸‹è½½å¤±è´¥ï¼5ç§’åé€€å‡º...\033[0m"
        sleep 5
        clear
        exit 1
    fi
}
